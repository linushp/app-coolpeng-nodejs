ejs=function(){function e(t){if("fs"==t)return{};if("path"==t)return{};var n=e.resolve(t),i=e.modules[n];if(!i)throw new Error('failed to require "'+t+'"');return i.exports||(i.exports={},i.call(i.exports,i,i.exports,e.relative(n))),i.exports}return e.modules={},e.resolve=function(t){var n=t,i=t+".js",r=t+"/index.js";return e.modules[i]&&i||e.modules[r]&&r||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.substr(0,1))return e(n);var i=t.split("/"),r=n.split("/");i.pop();for(var o=0;o<r.length;o++){var a=r[o];".."==a?i.pop():"."!=a&&i.push(a)}return e(i.join("/"))}},e.register("ejs.js",function(e,t,n){function i(e){return e.substr(1).split("|").reduce(function(e,t){var n=t.split(":"),i=n.shift(),r=n.join(":")||"";return r&&(r=", "+r),"filters."+i+"("+e+r+")"})}function r(e,t,n,i){var r=t.split("\n"),o=Math.max(i-3,0),a=Math.min(r.length,i+3),l=r.slice(o,a).map(function(e,t){var n=t+o+1;return(n==i?" >> ":"    ")+n+"| "+e}).join("\n");throw e.path=n,e.message=(n||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e}function o(e,t){var n=u(s(t),e),i=c(e);return i||(n+=".ejs"),n}var a=n("./utils"),l=n("path"),s=l.dirname,c=l.extname,u=l.join,f=n("fs"),p=f.readFileSync,d=t.filters=n("./filters"),y={};t.clearCache=function(){y={}};var m=(t.parse=function(e,n){var n=n||{},r=n.open||t.open||"<%",a=n.close||t.close||"%>",l=n.filename,s=n.compileDebug!==!1,c="";c+="var buf = [];",!1!==n._with&&(c+="\nwith (locals || {}) { (function(){ "),c+="\n buf.push('";for(var u=1,f=!1,d=0,y=e.length;y>d;++d){var m=e[d];if(e.slice(d,r.length+d)==r){d+=r.length;var h,g,v=(s?"__stack.lineno=":"")+u;switch(e[d]){case"=":h="', escape(("+v+", ",g=")), '",++d;break;case"-":h="', ("+v+", ",g="), '",++d;break;default:h="');"+v+";",g="; buf.push('"}var x=e.indexOf(a,d);if(0>x)throw new Error('Could not find matching close tag "'+a+'".');var b=e.substring(d,x),w=d,T=null,k=0;if("-"==b[b.length-1]&&(b=b.substring(0,b.length-2),f=!0),0==b.trim().indexOf("include")){var j=b.trim().slice(7).trim();if(!l)throw new Error("filename option is required for includes");var E=o(j,l);T=p(E,"utf8"),T=t.parse(T,{filename:E,_with:!1,open:r,close:a,compileDebug:s}),c+="' + (function(){"+T+"})() + '",b=""}for(;~(k=b.indexOf("\n",k));)k++,u++;":"==b.substr(0,1)&&(b=i(b)),b&&(b.lastIndexOf("//")>b.lastIndexOf("\n")&&(b+="\n"),c+=h,c+=b,c+=g),d+=x-w+a.length-1}else"\\"==m?c+="\\\\":"'"==m?c+="\\'":"\r"==m||("\n"==m?f?f=!1:(c+="\\n",u++):c+=m)}return c+=!1!==n._with?"'); })();\n} \nreturn buf.join('');":"');\nreturn buf.join('');"},t.compile=function(e,n){n=n||{};var i=n.escape||a.escape,o=JSON.stringify(e),l=n.compileDebug!==!1,s=n.client,c=n.filename?JSON.stringify(n.filename):"undefined";e=l?["var __stack = { lineno: 1, input: "+o+", filename: "+c+" };",r.toString(),"try {",t.parse(e,n),"} catch (err) {","  rethrow(err, __stack.input, __stack.filename, __stack.lineno);","}"].join("\n"):t.parse(e,n),n.debug&&console.log(e),s&&(e="escape = escape || "+i.toString()+";\n"+e);try{var u=new Function("locals, filters, escape, rethrow",e)}catch(f){throw"SyntaxError"==f.name&&(f.message+=n.filename?" in "+c:" while compiling ejs"),f}return s?u:function(e){return u.call(this,e,d,i,r)}});t.render=function(e,t){var n,t=t||{};if(t.cache){if(!t.filename)throw new Error('"cache" option requires "filename".');n=y[t.filename]||(y[t.filename]=m(e,t))}else n=m(e,t);return t.__proto__=t.locals,n.call(t.scope,t)},t.renderFile=function(e,n,i){var r=e+":string";"function"==typeof n&&(i=n,n={}),n.filename=e;var o;try{o=n.cache?y[r]||(y[r]=p(e,"utf8")):p(e,"utf8")}catch(a){return void i(a)}i(null,t.render(o,n))},t.__express=t.renderFile,n.extensions?n.extensions[".ejs"]=function(e,t){t=t||e.filename;var n={filename:t,client:!0},i=f.readFileSync(t).toString(),r=m(i,n);e._compile("module.exports = "+r.toString()+";",t)}:n.registerExtension&&n.registerExtension(".ejs",function(e){return m(e,{})})}),e.register("filters.js",function(e,t){t.first=function(e){return e[0]},t.last=function(e){return e[e.length-1]},t.capitalize=function(e){return e=String(e),e[0].toUpperCase()+e.substr(1,e.length)},t.downcase=function(e){return String(e).toLowerCase()},t.upcase=function(e){return String(e).toUpperCase()},t.sort=function(e){return Object.create(e).sort()},t.sort_by=function(e,t){return Object.create(e).sort(function(e,n){return e=e[t],n=n[t],e>n?1:n>e?-1:0})},t.size=t.length=function(e){return e.length},t.plus=function(e,t){return Number(e)+Number(t)},t.minus=function(e,t){return Number(e)-Number(t)},t.times=function(e,t){return Number(e)*Number(t)},t.divided_by=function(e,t){return Number(e)/Number(t)},t.join=function(e,t){return e.join(t||", ")},t.truncate=function(e,t,n){return e=String(e),e.length>t&&(e=e.slice(0,t),n&&(e+=n)),e},t.truncate_words=function(e,t){var e=String(e),n=e.split(/ +/);return n.slice(0,t).join(" ")},t.replace=function(e,t,n){return String(e).replace(t,n||"")},t.prepend=function(e,t){return Array.isArray(e)?[t].concat(e):t+e},t.append=function(e,t){return Array.isArray(e)?e.concat(t):e+t},t.map=function(e,t){return e.map(function(e){return e[t]})},t.reverse=function(e){return Array.isArray(e)?e.reverse():String(e).split("").reverse().join("")},t.get=function(e,t){return e[t]},t.json=function(e){return JSON.stringify(e)}}),e.register("utils.js",function(e,t){t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}}),e("ejs")}(),!function(e,t){"use strict";var n,i,r={getPath:function(){var e=document.scripts,t=e[e.length-1],n=t.src;return t.getAttribute("merge")?void 0:n.substring(0,n.lastIndexOf("/")+1)}(),enter:function(e){13===e.keyCode&&e.preventDefault()},config:{},end:{},btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]},o={v:"2.3",ie6:!!e.ActiveXObject&&!e.XMLHttpRequest,index:0,path:r.getPath,config:function(e,t){var i=0;return e=e||{},o.cache=r.config=n.extend(r.config,e),o.path=r.config.path||o.path,"string"==typeof e.extend&&(e.extend=[e.extend]),o.use("skin/layer.css",e.extend&&e.extend.length>0?function a(){var n=e.extend;o.use(n[n[i]?i:i-1],i<n.length?function(){return++i,a}():t)}():t),this},use:function(e,t,i){var r=n("head")[0],e=e.replace(/\s/g,""),a=/\.css$/.test(e),l=document.createElement(a?"link":"script"),s="layui_layer_"+e.replace(/\.|\//g,"");return o.path?(a&&(l.rel="stylesheet"),l[a?"href":"src"]=/^http:\/\//.test(e)?e:o.path+e,l.id=s,n("#"+s)[0]||r.appendChild(l),function c(){(a?1989===parseInt(n("#"+s).css("width")):o[i||s])?function(){t&&t();try{a||r.removeChild(l)}catch(e){}}():setTimeout(c,100)}(),this):void 0},ready:function(e,t){var i="function"==typeof e;return i&&(t=e),o.config(n.extend(r.config,function(){return i?{}:{path:e}}()),t),this},alert:function(e,t,i){var r="function"==typeof t;return r&&(i=t),o.open(n.extend({content:e,yes:i},r?{}:t))},confirm:function(e,t,i,a){var l="function"==typeof t;return l&&(a=i,i=t),o.open(n.extend({content:e,btn:r.btn,yes:i,btn2:a},l?{}:t))},msg:function(e,i,a){var s="function"==typeof i,c=r.config.skin,u=(c?c+" "+c+"-msg":"")||"layui-layer-msg",f=l.anim.length-1;return s&&(a=i),o.open(n.extend({content:e,time:3e3,shade:!1,skin:u,title:!1,closeBtn:!1,btn:!1,end:a},s&&!r.config.skin?{skin:u+" layui-layer-hui",shift:f}:function(){return i=i||{},(-1===i.icon||i.icon===t&&!r.config.skin)&&(i.skin=u+" "+(i.skin||"layui-layer-hui")),i}()))},load:function(e,t){return o.open(n.extend({type:3,icon:e||0,shade:.01},t))},tips:function(e,t,i){return o.open(n.extend({type:4,content:[e,t],closeBtn:!1,time:3e3,shade:!1,maxWidth:210},i))}},a=function(e){var t=this;t.index=++o.index,t.config=n.extend({},t.config,r.config,e),t.creat()};a.pt=a.prototype;var l=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];l.anim=["layer-anim","layer-anim-01","layer-anim-02","layer-anim-03","layer-anim-04","layer-anim-05","layer-anim-06"],a.pt.config={type:0,shade:.3,fix:!0,move:l[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,shift:0,icon:-1,scrollbar:!0,tips:2},a.pt.vessel=function(e,t){var n=this,i=n.index,o=n.config,a=o.zIndex+i,s="object"==typeof o.title,c=o.maxmin&&(1===o.type||2===o.type),u=o.title?'<div class="layui-layer-title" style="'+(s?o.title[1]:"")+'">'+(s?o.title[0]:o.title)+"</div>":"";return o.zIndex=a,t([o.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+i+'" times="'+i+'" style="'+("z-index:"+(a-1)+"; background-color:"+(o.shade[1]||"#000")+"; opacity:"+(o.shade[0]||o.shade)+"; filter:alpha(opacity="+(100*o.shade[0]||100*o.shade)+");")+'"></div>':"",'<div class="'+l[0]+" "+(l.anim[o.shift]||"")+(" layui-layer-"+r.type[o.type])+(0!=o.type&&2!=o.type||o.shade?"":" layui-layer-border")+" "+(o.skin||"")+'" id="'+l[0]+i+'" type="'+r.type[o.type]+'" times="'+i+'" showtime="'+o.time+'" conType="'+(e?"object":"string")+'" style="z-index: '+a+"; width:"+o.area[0]+";height:"+o.area[1]+(o.fix?"":";position:absolute;")+'">'+(e&&2!=o.type?"":u)+'<div id="'+(o.id||"")+'" class="layui-layer-content'+(0==o.type&&-1!==o.icon?" layui-layer-padding":"")+(3==o.type?" layui-layer-loading"+o.icon:"")+'">'+(0==o.type&&-1!==o.icon?'<i class="layui-layer-ico layui-layer-ico'+o.icon+'"></i>':"")+(1==o.type&&e?"":o.content||"")+'</div><span class="layui-layer-setwin">'+function(){var e=c?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";return o.closeBtn&&(e+='<a class="layui-layer-ico '+l[7]+" "+l[7]+(o.title?o.closeBtn:4==o.type?"1":"2")+'" href="javascript:;"></a>'),e}()+"</span>"+(o.btn?function(){var e="";"string"==typeof o.btn&&(o.btn=[o.btn]);for(var t=0,n=o.btn.length;n>t;t++)e+='<a class="'+l[6]+t+'">'+o.btn[t]+"</a>";return'<div class="'+l[6]+'">'+e+"</div>"}():"")+"</div>"],u),n},a.pt.creat=function(){var e=this,t=e.config,a=e.index,s=t.content,c="object"==typeof s;if(!n("#"+t.id)[0]){switch("string"==typeof t.area&&(t.area="auto"===t.area?["",""]:[t.area,""]),t.type){case 0:t.btn="btn"in t?t.btn:r.btn[0],o.closeAll("dialog");break;case 2:var s=t.content=c?t.content:[t.content||"http://layer.layui.com","auto"];t.content='<iframe scrolling="'+(t.content[1]||"auto")+'" allowtransparency="true" id="'+l[4]+a+'" name="'+l[4]+a+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+t.content[0]+'"></iframe>';break;case 3:t.title=!1,t.closeBtn=!1,-1===t.icon&&0===t.icon,o.closeAll("loading");break;case 4:c||(t.content=[t.content,"body"]),t.follow=t.content[1],t.content=t.content[0]+'<i class="layui-layer-TipsG"></i>',t.title=!1,t.fix=!1,t.tips="object"==typeof t.tips?t.tips:[t.tips,!0],t.tipsMore||o.closeAll("tips")}e.vessel(c,function(i,r){n("body").append(i[0]),c?function(){2==t.type||4==t.type?function(){n("body").append(i[1])}():function(){s.parents("."+l[0])[0]||(s.show().addClass("layui-layer-wrap").wrap(i[1]),n("#"+l[0]+a).find("."+l[5]).before(r))}()}():n("body").append(i[1]),e.layero=n("#"+l[0]+a),t.scrollbar||l.html.css("overflow","hidden").attr("layer-full",a)}).auto(a),2==t.type&&o.ie6&&e.layero.find("iframe").attr("src",s[0]),n(document).off("keydown",r.enter).on("keydown",r.enter),e.layero.on("keydown",function(){n(document).off("keydown",r.enter)}),4==t.type?e.tips():e.offset(),t.fix&&i.on("resize",function(){e.offset(),(/^\d+%$/.test(t.area[0])||/^\d+%$/.test(t.area[1]))&&e.auto(a),4==t.type&&e.tips()}),t.time<=0||setTimeout(function(){o.close(e.index)},t.time),e.move().callback()}},a.pt.auto=function(e){function t(e){e=a.find(e),e.height(s[1]-c-u-2*(0|parseFloat(e.css("padding"))))}var r=this,o=r.config,a=n("#"+l[0]+e);""===o.area[0]&&o.maxWidth>0&&(/MSIE 7/.test(navigator.userAgent)&&o.btn&&a.width(a.innerWidth()),a.outerWidth()>o.maxWidth&&a.width(o.maxWidth));var s=[a.innerWidth(),a.innerHeight()],c=a.find(l[1]).outerHeight()||0,u=a.find("."+l[6]).outerHeight()||0;switch(o.type){case 2:t("iframe");break;default:""===o.area[1]?o.fix&&s[1]>=i.height()&&(s[1]=i.height(),t("."+l[5])):t("."+l[5])}return r},a.pt.offset=function(){var e=this,t=e.config,n=e.layero,r=[n.outerWidth(),n.outerHeight()],o="object"==typeof t.offset;e.offsetTop=(i.height()-r[1])/2,e.offsetLeft=(i.width()-r[0])/2,o?(e.offsetTop=t.offset[0],e.offsetLeft=t.offset[1]||e.offsetLeft):"auto"!==t.offset&&(e.offsetTop=t.offset,"rb"===t.offset&&(e.offsetTop=i.height()-r[1],e.offsetLeft=i.width()-r[0])),t.fix||(e.offsetTop=/%$/.test(e.offsetTop)?i.height()*parseFloat(e.offsetTop)/100:parseFloat(e.offsetTop),e.offsetLeft=/%$/.test(e.offsetLeft)?i.width()*parseFloat(e.offsetLeft)/100:parseFloat(e.offsetLeft),e.offsetTop+=i.scrollTop(),e.offsetLeft+=i.scrollLeft()),n.css({top:e.offsetTop,left:e.offsetLeft})},a.pt.tips=function(){var e=this,t=e.config,r=e.layero,o=[r.outerWidth(),r.outerHeight()],a=n(t.follow);a[0]||(a=n("body"));var s={width:a.outerWidth(),height:a.outerHeight(),top:a.offset().top,left:a.offset().left},c=r.find(".layui-layer-TipsG"),u=t.tips[0];t.tips[1]||c.remove(),s.autoLeft=function(){s.left+o[0]-i.width()>0?(s.tipLeft=s.left+s.width-o[0],c.css({right:12,left:"auto"})):s.tipLeft=s.left},s.where=[function(){s.autoLeft(),s.tipTop=s.top-o[1]-10,c.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",t.tips[1])},function(){s.tipLeft=s.left+s.width+10,s.tipTop=s.top,c.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",t.tips[1])},function(){s.autoLeft(),s.tipTop=s.top+s.height+10,c.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",t.tips[1])},function(){s.tipLeft=s.left-o[0]-10,s.tipTop=s.top,c.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",t.tips[1])}],s.where[u-1](),1===u?s.top-(i.scrollTop()+o[1]+16)<0&&s.where[2]():2===u?i.width()-(s.left+s.width+o[0]+16)>0||s.where[3]():3===u?s.top-i.scrollTop()+s.height+o[1]+16-i.height()>0&&s.where[0]():4===u&&o[0]+16-s.left>0&&s.where[1](),r.find("."+l[5]).css({"background-color":t.tips[1],"padding-right":t.closeBtn?"30px":""}),r.css({left:s.tipLeft,top:s.tipTop})},a.pt.move=function(){var e=this,t=e.config,r={setY:0,moveLayer:function(){var e=r.layero,t=parseInt(e.css("margin-left")),n=parseInt(r.move.css("left"));0===t||(n-=t),"fixed"!==e.css("position")&&(n-=e.parent().offset().left,r.setY=0),e.css({left:n,top:parseInt(r.move.css("top"))-r.setY})}},o=e.layero.find(t.move);return t.move&&o.attr("move","ok"),o.css({cursor:t.move?"move":"auto"}),n(t.move).on("mousedown",function(e){if(e.preventDefault(),"ok"===n(this).attr("move")){r.ismove=!0,r.layero=n(this).parents("."+l[0]);var o=r.layero.offset().left,a=r.layero.offset().top,s=r.layero.outerWidth()-6,c=r.layero.outerHeight()-6;n("#layui-layer-moves")[0]||n("body").append('<div id="layui-layer-moves" class="layui-layer-moves" style="left:'+o+"px; top:"+a+"px; width:"+s+"px; height:"+c+'px; z-index:2147483584"></div>'),r.move=n("#layui-layer-moves"),t.moveType&&r.move.css({visibility:"hidden"}),r.moveX=e.pageX-r.move.position().left,r.moveY=e.pageY-r.move.position().top,"fixed"!==r.layero.css("position")||(r.setY=i.scrollTop())}}),n(document).mousemove(function(e){if(r.ismove){var n=e.pageX-r.moveX,o=e.pageY-r.moveY;if(e.preventDefault(),!t.moveOut){r.setY=i.scrollTop();var a=i.width()-r.move.outerWidth(),l=r.setY;0>n&&(n=0),n>a&&(n=a),l>o&&(o=l),o>i.height()-r.move.outerHeight()+r.setY&&(o=i.height()-r.move.outerHeight()+r.setY)}r.move.css({left:n,top:o}),t.moveType&&r.moveLayer(),n=o=a=l=null}}).mouseup(function(){try{r.ismove&&(r.moveLayer(),r.move.remove(),t.moveEnd&&t.moveEnd()),r.ismove=!1}catch(e){r.ismove=!1}}),e},a.pt.callback=function(){function e(){var e=a.cancel&&a.cancel(t.index,i);e===!1||o.close(t.index)}var t=this,i=t.layero,a=t.config;t.openLayer(),a.success&&(2==a.type?i.find("iframe").on("load",function(){a.success(i,t.index)}):a.success(i,t.index)),o.ie6&&t.IE6(i),i.find("."+l[6]).children("a").on("click",function(){var e=n(this).index();if(0===e)a.yes?a.yes(t.index,i):a.btn1?a.btn1(t.index,i):o.close(t.index);else{var r=a["btn"+(e+1)]&&a["btn"+(e+1)](t.index,i);r===!1||o.close(t.index)}}),i.find("."+l[7]).on("click",e),a.shadeClose&&n("#layui-layer-shade"+t.index).on("click",function(){o.close(t.index)}),i.find(".layui-layer-min").on("click",function(){o.min(t.index,a),a.min&&a.min(i)}),i.find(".layui-layer-max").on("click",function(){n(this).hasClass("layui-layer-maxmin")?(o.restore(t.index),a.restore&&a.restore(i)):(o.full(t.index,a),a.full&&a.full(i))}),a.end&&(r.end[t.index]=a.end)},r.reselect=function(){n.each(n("select"),function(){var e=n(this);e.parents("."+l[0])[0]||1==e.attr("layer")&&n("."+l[0]).length<1&&e.removeAttr("layer").show(),e=null})},a.pt.IE6=function(e){function t(){e.css({top:o+(r.config.fix?i.scrollTop():0)})}var r=this,o=e.offset().top;t(),i.scroll(t),n("select").each(function(){var e=n(this);e.parents("."+l[0])[0]||"none"===e.css("display")||e.attr({layer:"1"}).hide(),e=null})},a.pt.openLayer=function(){var e=this;o.zIndex=e.config.zIndex,o.setTop=function(e){var t=function(){o.zIndex++,e.css("z-index",o.zIndex+1)};return o.zIndex=parseInt(e[0].style.zIndex),e.on("mousedown",t),o.zIndex}},r.record=function(e){var t=[e.outerWidth(),e.outerHeight(),e.position().top,e.position().left+parseFloat(e.css("margin-left"))];e.find(".layui-layer-max").addClass("layui-layer-maxmin"),e.attr({area:t})},r.rescollbar=function(e){l.html.attr("layer-full")==e&&(l.html[0].style.removeProperty?l.html[0].style.removeProperty("overflow"):l.html[0].style.removeAttribute("overflow"),l.html.removeAttr("layer-full"))},e.layer=o,o.getChildFrame=function(e,t){return t=t||n("."+l[4]).attr("times"),n("#"+l[0]+t).find("iframe").contents().find(e)},o.getFrameIndex=function(e){return n("#"+e).parents("."+l[4]).attr("times")},o.iframeAuto=function(e){if(e){var t=o.getChildFrame("html",e).outerHeight(),i=n("#"+l[0]+e),r=i.find(l[1]).outerHeight()||0,a=i.find("."+l[6]).outerHeight()||0;i.css({height:t+r+a}),i.find("iframe").css({height:t})}},o.iframeSrc=function(e,t){n("#"+l[0]+e).find("iframe").attr("src",t)},o.style=function(e,t){var i=n("#"+l[0]+e),o=i.attr("type"),a=i.find(l[1]).outerHeight()||0,s=i.find("."+l[6]).outerHeight()||0;(o===r.type[1]||o===r.type[2])&&(i.css(t),o===r.type[2]&&i.find("iframe").css({height:parseFloat(t.height)-a-s}))},o.min=function(e){var t=n("#"+l[0]+e),i=t.find(l[1]).outerHeight()||0;r.record(t),o.style(e,{width:180,height:i,overflow:"hidden"}),t.find(".layui-layer-min").hide(),"page"===t.attr("type")&&t.find(l[4]).hide(),r.rescollbar(e)},o.restore=function(e){var t=n("#"+l[0]+e),i=t.attr("area").split(",");t.attr("type"),o.style(e,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3]),overflow:"visible"}),t.find(".layui-layer-max").removeClass("layui-layer-maxmin"),t.find(".layui-layer-min").show(),"page"===t.attr("type")&&t.find(l[4]).show(),r.rescollbar(e)},o.full=function(e){var t,a=n("#"+l[0]+e);r.record(a),l.html.attr("layer-full")||l.html.css("overflow","hidden").attr("layer-full",e),clearTimeout(t),t=setTimeout(function(){var t="fixed"===a.css("position");o.style(e,{top:t?0:i.scrollTop(),left:t?0:i.scrollLeft(),width:i.width(),height:i.height()}),a.find(".layui-layer-min").hide()},100)},o.title=function(e,t){var i=n("#"+l[0]+(t||o.index)).find(l[1]);i.html(e)},o.close=function(e){var t=n("#"+l[0]+e),i=t.attr("type");if(t[0]){if(i===r.type[1]&&"object"===t.attr("conType")){t.children(":not(."+l[5]+")").remove();for(var a=0;2>a;a++)t.find(".layui-layer-wrap").unwrap().hide()}else{if(i===r.type[2])try{var s=n("#"+l[4]+e)[0];s.contentWindow.document.write(""),s.contentWindow.close(),t.find("."+l[5])[0].removeChild(s)}catch(c){}t[0].innerHTML="",t.remove()}n("#layui-layer-moves, #layui-layer-shade"+e).remove(),o.ie6&&r.reselect(),r.rescollbar(e),n(document).off("keydown",r.enter),"function"==typeof r.end[e]&&r.end[e](),delete r.end[e]}},o.closeAll=function(e){n.each(n("."+l[0]),function(){var t=n(this),i=e?t.attr("type")===e:1;i&&o.close(t.attr("times")),i=null})};var s=o.cache||{},c=function(e){return s.skin?" "+s.skin+" "+s.skin+"-"+e:""};o.prompt=function(e,t){e=e||{},"function"==typeof e&&(t=e);var i,r=2==e.formType?'<textarea class="layui-layer-input">'+(e.value||"")+"</textarea>":function(){return'<input type="'+(1==e.formType?"password":"text")+'" class="layui-layer-input" value="'+(e.value||"")+'">'}();return o.open(n.extend({btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],content:r,skin:"layui-layer-prompt"+c("prompt"),success:function(e){i=e.find(".layui-layer-input"),i.focus()},yes:function(n){var r=i.val();""===r?i.focus():r.length>(e.maxlength||500)?o.tips("&#x6700;&#x591A;&#x8F93;&#x5165;"+(e.maxlength||500)+"&#x4E2A;&#x5B57;&#x6570;",i,{tips:1}):t&&t(r,n,i)}},e))},o.tab=function(e){e=e||{};var t=e.tab||{};return o.open(n.extend({type:1,skin:"layui-layer-tab"+c("tab"),title:function(){var e=t.length,n=1,i="";if(e>0)for(i='<span class="layui-layer-tabnow">'+t[0].title+"</span>";e>n;n++)i+="<span>"+t[n].title+"</span>";return i}(),content:'<ul class="layui-layer-tabmain">'+function(){var e=t.length,n=1,i="";if(e>0)for(i='<li class="layui-layer-tabli xubox_tab_layer">'+(t[0].content||"no content")+"</li>";e>n;n++)i+='<li class="layui-layer-tabli">'+(t[n].content||"no  content")+"</li>";return i}()+"</ul>",success:function(t){var i=t.find(".layui-layer-title").children(),r=t.find(".layui-layer-tabmain").children();i.on("mousedown",function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0;var i=n(this),o=i.index();i.addClass("layui-layer-tabnow").siblings().removeClass("layui-layer-tabnow"),r.eq(o).show().siblings().hide(),"function"==typeof e.change&&e.change(o)})}},e))},o.photos=function(t,i,r){function a(e,t,n){var i=new Image;return i.src=e,i.complete?t(i):(i.onload=function(){i.onload=null,t(i)},void(i.onerror=function(e){i.onerror=null,n(e)}))}var l={};if(t=t||{},t.photos){var s=t.photos.constructor===Object,u=s?t.photos:{},f=u.data||[],p=u.start||0;if(l.imgIndex=(0|p)+1,t.img=t.img||"img",s){if(0===f.length)return o.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")}else{var d=n(t.photos),y=function(){f=[],d.find(t.img).each(function(e){var t=n(this);t.attr("layer-index",e),f.push({alt:t.attr("alt"),pid:t.attr("layer-pid"),src:t.attr("layer-src")||t.attr("src"),thumb:t.attr("src")})})};if(y(),0===f.length)return;if(i||d.on("click",t.img,function(){var e=n(this),i=e.attr("layer-index");o.photos(n.extend(t,{photos:{start:i,data:f,tab:t.tab},full:t.full}),!0),y()}),!i)return}l.imgprev=function(e){l.imgIndex--,l.imgIndex<1&&(l.imgIndex=f.length),l.tabimg(e)},l.imgnext=function(e,t){l.imgIndex++,l.imgIndex>f.length&&(l.imgIndex=1,t)||l.tabimg(e)},l.keyup=function(e){if(!l.end){var t=e.keyCode;e.preventDefault(),37===t?l.imgprev(!0):39===t?l.imgnext(!0):27===t&&o.close(l.index)}},l.tabimg=function(e){f.length<=1||(u.start=l.imgIndex-1,o.close(l.index),o.photos(t,!0,e))},l.event=function(){l.bigimg.hover(function(){l.imgsee.show()},function(){l.imgsee.hide()}),l.bigimg.find(".layui-layer-imgprev").on("click",function(e){e.preventDefault(),l.imgprev()}),l.bigimg.find(".layui-layer-imgnext").on("click",function(e){e.preventDefault(),l.imgnext()}),n(document).on("keyup",l.keyup)},l.loadi=o.load(1,{shade:"shade"in t?!1:.9,scrollbar:!1}),a(f[p].src,function(i){o.close(l.loadi),l.index=o.open(n.extend({type:1,area:function(){var r=[i.width,i.height],o=[n(e).width()-50,n(e).height()-50];return!t.full&&r[0]>o[0]&&(r[0]=o[0],r[1]=r[0]*i.height/i.width),[r[0]+"px",r[1]+"px"]}(),title:!1,shade:.9,shadeClose:!0,closeBtn:!1,move:".layui-layer-phimg img",moveType:1,scrollbar:!1,moveOut:!0,shift:5*Math.random()|0,skin:"layui-layer-photos"+c("photos"),content:'<div class="layui-layer-phimg"><img src="'+f[p].src+'" alt="'+(f[p].alt||"")+'" layer-pid="'+f[p].pid+'"><div class="layui-layer-imgsee">'+(f.length>1?'<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>':"")+'<div class="layui-layer-imgbar" style="display:'+(r?"block":"")+'"><span class="layui-layer-imgtit"><a href="javascript:;">'+(f[p].alt||"")+"</a><em>"+l.imgIndex+"/"+f.length+"</em></span></div></div></div>",success:function(e){l.bigimg=e.find(".layui-layer-phimg"),l.imgsee=e.find(".layui-layer-imguide,.layui-layer-imgbar"),l.event(e),t.tab&&t.tab(f[p],e)},end:function(){l.end=!0,n(document).off("keyup",l.keyup)}},t))},function(){o.close(l.loadi),o.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;",{time:3e4,btn:["&#x4E0B;&#x4E00;&#x5F20;","&#x4E0D;&#x770B;&#x4E86;"],yes:function(){f.length>1&&l.imgnext(!0,!0)}})})}},r.run=function(){n=jQuery,i=n(e),l.html=n("html"),o.open=function(e){var t=new a(e);return t.index}},"function"==typeof define?define(function(){return r.run(),o}):function(){r.run()}()}(window),function(e){e.iniAjaxLink=function(t){var n=jQuery,i=t.firstTarget||"body";if(e.history.pushState){var r,o,a={};n(document).on("click",".ajax-link",function(l){var s=n(this),c=s.attr("ajax-target");if(c&&0!==c.length){l.preventDefault(),l.stopPropagation();var u=n(c);r||(o={url:document.location.href,title:document.title,html:n(i).html(),ajaxTarget:i});var f=n(this),p=f.attr("href"),d=e.setTimeout(function(){u.html("loading...")},500),y=function(t,n){d&&e.clearTimeout(d),n=n||{},u.html(t);var i={url:p,title:n.title||f.html(),html:t,ajaxTarget:c};e.history.pushState(i,null,p)};r=n.ajax({url:p,dataType:"json",type:"get",timeout:1e4,success:function(e){var t=e.templateName,n=e.template;n?a[t]=n:n=a[t];var i=e.data||{},r=ejs.render(n,i);y(r,i)},complete:function(e,t){"timeout"==t&&r.abort()},beforeSend:function(e){var n=t.getTemplateName(p,f),i=null;n&&(i=a[n]),i?e.setRequestHeader("CP_NEED_TEMPLATE","false"):e.setRequestHeader("CP_NEED_TEMPLATE","true")}})}}),e.addEventListener("popstate",function(e){if(null==r);else if(e&&e.state){document.title=e.state.title;var t=n(e.state.ajaxTarget);t.html(e.state.html)}else{document.title=o.title;var a=n(i);a.html(o.html)}})}}}(window),jQuery(document).ready(function(e){iniAjaxLink({firstTarget:".main-body",getTemplateName:function(e){return e.indexOf("/blog/post/")>=0?"blog/post":e.indexOf("/blog")>=0?"blog/index":null}}),e(document).on("click",".create-post-submit",function(){var t=e(".create-post"),n={title:t.find("input[name=title]").val(),content:t.find("[name=content]").val()};e(".create-post-msg").html("loading...."),e.post("/blog/post",n,function(t){e(".create-post-msg").html(t)})}),e(document).on("click",".create-post-comment-submit",function(){var t=e(".create-post-comment"),n=t.data("id"),i={title:t.find("[name=title]").val(),content:t.find("[name=content]").val()};e(".create-post-comment-msg").html("loading...."),e.post("/blog/post-comment/"+n,i,function(t){e(".create-post-comment-msg").html(t)})})});